---
title: "Data_Clean"
author: "Mengyun Li"
date: "2017/11/5"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(lubridate)
```


```{r}
# Remove unrelated rows
W155_air <- read.csv("TAO_T0N155W_M_AIRT_daily.ascii", sep="", header = FALSE)
W155_air <- W155_air[-c(1,2),-c(2,4:14)]
W155_sea <- read.csv("TAO_T0N155W_M_SST_daily.ascii", sep="", header = FALSE)
W155_sea <- W155_sea[-c(1,2),-c(4:14)]
W155_air.tidy <- W155_air %>% filter(V1 != "Height",V1!="YYYYMMDD", V1 != "Deployment:")
W155_sea.tidy <- W155_sea %>% filter(V1 != "Height",V1!="YYYYMMDD", V1 != "Deployment:", V1 != "Depth")
# Rename column names
colnames(W155_sea.tidy) <- c("date_time","time_diff","sea_temp")
colnames(W155_air.tidy) <- c("date_time","air_temp")
# Join to one data set
W155_air.tidy[,1]<-as.character(W155_air.tidy[,1])
W155_air.tidy[,2]<-as.character(W155_air.tidy[,2])
W155_sea.tidy[,1] <-as.character(W155_sea.tidy[,1])
W155_sea.tidy[,2] <-as.character(W155_sea.tidy[,2])
W155_sea.tidy[,3] <-as.character(W155_sea.tidy[,3])

W155_temp<-full_join(W155_sea.tidy,W155_air.tidy, by ="date_time", copy = FALSE)
# Add team_num, reading_type, time_diff, latitude, longtitude
W155_temp $team_num <-"14"
W155_temp $reading_type <-"buoy"
W155_temp $time_diff <-"0"
W155_temp $Lat <-"0"
W155_temp $Lon <-"-155"
# Reorder the clumns
W155_temp<-W155_temp[,c('team_num','reading_type','time_diff','date_time','Lat','Lon','sea_temp','air_temp')]

# Add hours to date_time
W155_temp$date_time <- ymd(W155_temp$date_time)
hour(W155_temp$date_time) <- 12

# Change data type
W155_temp $team_num <-as.numeric(W155_temp $team_num)
W155_temp $time_diff <-as.numeric(W155_temp $time_diff)
W155_temp $Lat <-as.numeric(W155_temp $Lat)
W155_temp $Lon <-as.numeric(W155_temp $Lon)


```


